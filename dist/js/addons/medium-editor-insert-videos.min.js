!function(a){function b(a){for(var b in e){var c=e[b],d=a.replace(c.pattern,c.replace);if(a!=d)return d}throw"Could not parse url"}function c(a,c,e){var f=b(a);return c=c?c:d.width,e=e?e:d.height,'<object width="'+c+'" height="'+e+'">\n  <param name="allowfullscreen" value="true" />\n  <param name="allowscriptaccess" value="always" />\n  <param name="movie" value="'+f+'" />\n  <embed src="'+f+'" \n    type="application/x-shockwave-flash" \n    allowfullscreen="true" \n    allowscriptaccess="always" \n    width="'+c+'" \n    height="'+e+'"></embed>\n</object>'}var d={width:400,height:300,previewWidth:320,previewHeight:200},e={dailymotion:{pattern:/^((http:\/\/)?(www\.)?dailymotion\.com\/video\/)([a-z0-9]+)(_(.*)?)$/,replace:"http://www.dailymotion.com/swf/$4"},vimeo:{pattern:/^((http:\/\/)?(www\.)?vimeo\.com\/)(\d+)(.*)?$/,replace:"http://vimeo.com/moogaloop.swf?clip_id=$4&amp;server=vimeo.com&amp;show_title=1&amp;show_byline=1&amp;show_portrait=0&amp;color=&amp;fullscreen=1"},youtube:{pattern:/^((http:\/\/)?(www\.)?youtube\.com\/watch\?v=)([a-zA-Z0-9-]+)(.*)?$/,replace:"http://www.youtube.com/v/$4&amp;fs=1"}};a.fn.mediumInsert.registerAddon("videos",{init:function(b){b&&b.$el&&(this.$el=b.$el),this.options=a.extend(this.default,b),this.setVideoEvents(),this.setDragAndDropEvents(),this.preparePreviousVideos()},insertButton:function(a){var b="Video";return"fontawesome"==a&&(b='<i class="fa fa-youtube-play"></i>'),'<button data-addon="videos" data-action="add" class="medium-editor-action medium-editor-action-image mediumInsert-action">'+b+"</button>"},"default":{},preparePreviousVideos:function(){this.$el.find(".mediumInsert-videos").each(function(){var b=a(this).parent();b.html('<div class="mediumInsert-placeholder" draggable="true">'+b.html()+"</div>")})},add:function(b){var c='<div class="medium-editor-toolbar-form-anchor js-medium-insert-video" id="medium-editor-toolbar-form-video" style="display: block;"><form class="mediumInsert-video-form"><input type="text" value="" placeholder="Paste or type a link to video"> <a href="#">Ã—</a></form></div>';a(c).appendTo(b.prev()),setTimeout(function(){b.prev().find("input").focus()},50),a.fn.mediumInsert.insert.deselect()},setVideoEvents:function(){this.$el.on("submit",".mediumInsert-video-form",function(b){var d=a(this).find("input").val(),e=a(this).closest(".mediumInsert-buttons").next();try{var f=c(d),g='<div class="mediumInsert-video">'+f+"</div>";e.append(g).parents(".mediumInsert").mouseleave()}catch(h){window.alert(h)}return a(this).find("input").blur(),b.preventDefault(),!1}),this.$el.on("mouseenter",".mediumInsert-video",function(){var b,c;a.fn.mediumInsert.settings.enabled!==!1&&($object=a(this),a(this).append('<a class="mediumInsert-videoRemove"></a>'),b=$object.position().top+parseInt($object.css("margin-top"),10),c=$object.position().left+$object.width()-30,a(".mediumInsert-videoRemove",this).css({right:"auto",top:b,left:c}))}),this.$el.on("blur",".mediumInsert-video-form input",function(){setTimeout(function(){a(".js-medium-insert-video").remove()},50)}),this.$el.on("mouseleave",".mediumInsert-videos",function(){a(".mediumInsert-videoRemove",this).remove()}),this.$el.on("click",".mediumInsert-videoRemove",function(){0===a(this).parent().siblings().length&&a(this).parent().parent().parent().removeClass("small"),a(this).parent().remove(),a.fn.mediumInsert.insert.deselect()})},setDragAndDropEvents:function(){a(document).on("dragover","body",function(){a.fn.mediumInsert.settings.enabled!==!1&&a(this).addClass("hover")}),a(document).on("dragend","body",function(){a.fn.mediumInsert.settings.enabled!==!1&&a(this).removeClass("hover")}),this.$el.on("dragover",".mediumInsert",function(){a.fn.mediumInsert.settings.enabled!==!1&&(a(this).addClass("hover"),a(this).attr("contenteditable",!0))}),this.$el.on("dragleave",".mediumInsert",function(){a.fn.mediumInsert.settings.enabled!==!1&&(a(this).removeClass("hover"),a(this).attr("contenteditable",!1))})}})}(jQuery);