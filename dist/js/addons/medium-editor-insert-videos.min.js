!function(a){function b(a){for(var b in d){var c=d[b],e=a.replace(c.pattern,c.replace);if(a!=e)return e}throw"Could not parse url"}function c(a,c,d){var e=b(a);return'<object width="'+c+'" height="'+d+'">\n  <param name="allowfullscreen" value="true" />\n  <param name="allowscriptaccess" value="always" />\n  <param name="movie" value="'+e+'" />\n  <embed src="'+e+'" \n    type="application/x-shockwave-flash" \n    allowfullscreen="true" \n    allowscriptaccess="always" \n    width="'+c+'" \n    height="'+d+'"></embed>\n</object>'}var d={dailymotion:{pattern:/^((http:\/\/)?(www\.)?dailymotion\.com\/video\/)([a-z0-9]+)(_(.*)?)$/,replace:"http://www.dailymotion.com/swf/$4"},vimeo:{pattern:/^((http:\/\/)?(www\.)?vimeo\.com\/)(\d+)(.*)?$/,replace:"http://vimeo.com/moogaloop.swf?clip_id=$4&amp;server=vimeo.com&amp;show_title=1&amp;show_byline=1&amp;show_portrait=0&amp;color=&amp;fullscreen=1"},youtube:{pattern:/^((http(s)?:\/\/)?(www\.)?(youtube\.com|youtu\.be)\/(watch\?v=|v\/)?)([a-zA-Z0-9-]+)(.*)?$/,replace:"http://www.youtube.com/v/$7&amp;fs=1"}};a.fn.mediumInsert.registerAddon("videos",{init:function(b){b&&b.$el&&(this.$el=b.$el),this.options=a.extend(this.default,b),this.setVideoEvents(),this.preparePreviousVideos()},insertButton:function(a){var b="Video";return"fontawesome"==a&&(b='<i class="fa fa-youtube-play"></i>'),'<button data-addon="videos" data-action="add" class="medium-editor-action medium-editor-action-image mediumInsert-action">'+b+"</button>"},"default":{width:400,height:300},preparePreviousVideos:function(){this.$el.find(".mediumInsert-video").each(function(){var b=a(this).parent();b.html('<div class="mediumInsert-placeholder" draggable="true">'+b.html()+"</div>")})},add:function(b){var c='<div class="medium-editor-toolbar-form-anchor js-medium-insert-video" id="medium-editor-toolbar-form-video" style="display: block;"><form class="mediumInsert-video-form"><input type="text" value="" placeholder="Paste or type a link to video"> <a href="#">Ã—</a></form></div>';a(c).appendTo(b.prev()),setTimeout(function(){b.prev().find("input").focus()},50),a.fn.mediumInsert.insert.deselect()},setVideoEvents:function(){var b=this.options;this.$el.on("submit",".mediumInsert-video-form",function(d){var e=a(this).find("input").val(),f=a(this).closest(".mediumInsert-buttons").next();try{var g=c(e,b.width,b.height),h='<div class="mediumInsert-video">'+g+"</div>";f.append(h).parents(".mediumInsert").mouseleave()}catch(i){window.alert(i)}return a(this).find("input").blur(),d.preventDefault(),!1}),this.$el.on("mouseenter",".mediumInsert-video",function(){var b,c;a.fn.mediumInsert.settings.enabled!==!1&&($object=a(this),a(this).append('<a class="mediumInsert-videoRemove"></a>'),b=$object.position().top+parseInt($object.css("margin-top"),10),c=$object.position().left+$object.width()-30,a(".mediumInsert-videoRemove",this).css({right:"auto",top:b,left:c}))}),this.$el.on("blur",".mediumInsert-video-form input",function(){a(".js-medium-insert-video").remove()}),this.$el.on("mouseleave",".mediumInsert-video",function(){a(".mediumInsert-videoRemove",this).remove()}),this.$el.on("click",".mediumInsert-videoRemove",function(){0===a(this).parent().siblings().length&&a(this).parent().parent().parent().removeClass("small"),a(this).parent().remove(),a.fn.mediumInsert.insert.deselect()})}})}(jQuery);